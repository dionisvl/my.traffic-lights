FROM node:20-alpine
WORKDIR /app

# Install backend deps
COPY backend/package.json backend/package-lock.json ./backend/
RUN cd backend && npm ci

# Copy game engine
COPY src/ ./src/

# Copy backend sources
COPY backend/ ./backend/

EXPOSE 4000
WORKDIR /app/backend
CMD ["npm", "run", "start:dev"]

